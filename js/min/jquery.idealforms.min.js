/*--------------------------------------------------------------------------

  jq-idealforms 2.0

  * Author: Cedric Ruiz
  * License: GPL
  * Demo: http://elclanrs.github.com/jq-idealforms/

--------------------------------------------------------------------------*/(function(e){"use strict";var t={getMaxWidth:function(t){var n=0;return t.each(function(){e(this).outerWidth()>n&&(n=e(this).outerWidth())}),n},getLessVar:function(t,n){var r=e('<p class="'+t+'"></p>').hide().appendTo("body").css(n);return e("."+t).remove(),/^\d+/.test(r)?parseInt(r,10):r},getKeys:function(e){var t=[];for(var n in e)t.push(n);return t}};e.fn.toCustomSelect=function(){return this.each(function(){var t=e(this),n=function(){var n=t.find("option"),r=e('<ul class="ideal-select '+t.attr("name")+'"/>'),i=e('<li><span class="title">'+n.filter(":selected").text()+"</span></li>"),s=function(){var t=[];return n.each(function(){var n=e(this);t.push('<li class="item" ideal-value="'+n.val()+'">'+n.text()+"</li>")}),t}();return i.append('<ul class="sub">'+s.join("")+"</ul>"),r.append(i),{options:n,select:r,title:i.find(".title"),sub:i.find(".sub"),items:i.find(".sub li")}}(),r={init:function(){t.css({position:"absolute",left:"-9999px"}),n.select.insertAfter(t),n.sub.hide(),n.items.eq(n.options.filter(":selected").index()).addClass("selected")}(),noWindowScroll:function(e){(e.which===40||e.which===38||e.which===13)&&e.preventDefault()},focusHack:function(){setTimeout(function(){t.trigger("focus")},1)},focus:function(){n.select.addClass("focus"),e(document).on("keydown.noscroll",r.noWindowScroll)},blur:function(){n.select.removeClass("open focus"),e(document).off(".noscroll")},scrollIntoView:function(e){var t=n.items.filter(".selected"),r=t.outerHeight(),i=n.sub.outerHeight(),s=function(){var n=t.position().top+r;return e==="down"?n<=i:n>0}();s||(r=e==="down"?r:-r,n.sub.scrollTop(n.sub.scrollTop()+r))},scrollToItem:function(){var e=n.items.filter(".selected").index(),t=n.items.outerHeight(),r=n.items.length,i=t*r,s=t*(r-e);n.sub.scrollTop(i-s)},showMenu:function(){n.sub.fadeIn("fast"),n.select.addClass("open"),r.select(n.options.filter(":selected").index()),r.scrollToItem()},hideMenu:function(){n.sub.hide(),n.select.removeClass("open")},select:function(e){n.items.removeClass("selected"),n.items.eq(e).addClass("selected")},change:function(e){var i=n.items.eq(e).text();r.select(e),n.title.text(i),n.options.eq(e).prop("selected",!0),t.trigger("change")},keydown:function(t){var i=n.items.filter(".selected").index(),s={9:function(){n.select.is(".menu")&&(r.blur(),r.hideMenu())},13:function(){n.select.is(".menu")&&(n.select.is(".open")?r.hideMenu():r.showMenu()),r.change(i)},27:function(){n.select.is(".menu")&&r.hideMenu()},40:function(){i<n.options.length-1&&(n.select.is(".open")?r.select(i+1):r.change(i+1)),r.scrollIntoView("down")},38:function(){i>0&&(n.select.is(".open")?r.select(i-1):r.change(i-1)),r.scrollIntoView("up")},"default":function(){var i=String.fromCharCode(t),s=n.items.filter(".selected").parent().index(),o=n.items.filter(function(){var t=new RegExp("^"+i,"i");return t.test(e(this).text())}).first().index();r.change(~o?o:s),r.scrollToItem(),r.focusHack()}};s[t]?s[t]():s["default"]()}},i={focus:r.focus,"blur.menu":function(){r.blur(),r.hideMenu()},"blur.list":function(){r.blur()},keydown:function(e){r.keydown(e.which)},"clickItem.menu":function(){r.change(e(this).index()),r.hideMenu()},"clickItem.list":function(){r.change(e(this).index())},"clickTitle.menu":function(){r.focus(),r.showMenu(),t.trigger("focus")},"hideOutside.menu":function(){t.off("blur.menu"),e(document).on("mousedown.ideal",function(s){e(s.target).closest(n.select).length?r.focusHack():(e(document).off("mousedown.ideal"),t.on("blur.menu",i["blur.menu"]))})},"mousedown.list":function(){r.focusHack()}},s=function(){n.select.removeClass("menu list"),t.off(".menu .list"),n.items.off(".menu .list"),n.select.off(".menu .list"),n.title.off(".menu .list")};n.select.on("menu",function(){s(),n.select.addClass("menu"),r.hideMenu(),t.on({"blur.menu":i["blur.menu"],"focus.menu":i.focus,"keydown.menu":i.keydown}),n.select.on("mousedown.menu",i["hideOutside.menu"]),n.items.on("click.menu",i["clickItem.menu"]),n.title.on("click.menu",i["clickTitle.menu"])}),n.select.on("list",function(){s(),n.select.addClass("list"),r.showMenu(),t.on({"blur.list":i["blur.list"],"focus.list":i.focus,"keydown.list":i.keydown}),n.select.on("mousedown.list",i["mousedown.list"]),n.items.on("mousedown.list",i["clickItem.list"])}),n.select.trigger("menu")})},e.fn.toCustomRadioCheck=function(){return this.each(function(){var t=e(this),n=e("<span/>");t.is(":checkbox")?n.addClass("ideal-check"):n.addClass("ideal-radio"),t.is(":checked")&&n.addClass("checked"),n.insertAfter(t),e(this).parent("label").attr("onclick",""),t.css({position:"absolute",left:"-9999px"}).on({change:function(){var t=e(this);t.trigger("focus"),t.is(":radio")?(t.parent().siblings("label").children(".ideal-radio").removeClass("checked"),t.next(".ideal-radio").addClass("checked")):t.is(":checked")?n.addClass("checked"):n.removeClass("checked")},focus:function(){n.parent().addClass("focus")},blur:function(){n.parent().removeClass("focus")},click:function(){e(this).trigger("focus")}})})};var n={number:{regex:/\d+/,error:"Must be a number."},digits:{regex:/^\d+$/,error:"Must be only digits."},name:{regex:/^[A-Za-z]{3,}$/,error:"Must be at least 3 characters long, and must only contain letters."},username:{regex:/^[a-z](?=[\w.]{3,31}$)\w*\.?\w*$/i,error:"Must be at between 4 and 32 characters long and start with a letter. You may use letters, numbers, underscores, and one dot (.)"},pass:{regex:/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/,error:"Must be at least 6 characters long, and contain at least one number, one uppercase and one lowercase letter."},strongpass:{regex:/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/,error:"Must be at least 8 characters long and contain at least one uppercase and one lowercase letter and one number or special character."},email:{regex:/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,error:"Must be a valid e-mail address. <em>(e.g. user@gmail.com)</em>"},phone:{regex:/^[2-9]\d{2}-\d{3}-\d{4}$/,error:"Must be a valid US phone number. <em>(e.g. 555-123-4567)</em>"},zip:{regex:/^\d{5}$|^\d{5}-\d{4}$/,error:"Must be a valid US zip code. <em>(e.g. 33245 or 33245-0003)</em>"},url:{regex:/^(?:(ftp|http|https):\/\/)?(?:[\w\-]+\.)+[a-z]{3,6}$/i,error:"Must be a valid URL. <em>(e.g. www.google.com)</em>"},min:{regex:function(e,t){var n=e.userOptions.data.min;return e.input.is(":checkbox, :radio")?(this.error="Check at least <strong>"+n+"</strong>",e.input.filter(":checked").length>=n):(this.error="Must be at least <strong>"+n+"</strong> characters long.",t.length>n-1)}},max:{regex:function(e,t){var n=e.userOptions.data.max;return this.error="<strong>"+n+"</strong> characters max.",t.length<=n}},date:{regex:function(e,t){var n=/^(\d{1,2})\/(\d{1,2})\/(\d{4})$/.exec(t),r=function(e,t,n){return e>0&&e<13&&n>0&&n<32768&&t>0&&t<=(new Date(n,e,0)).getDate()};return n&&r(n[1],n[2],n[3])},error:"Must be a valid date. <em>(e.g. mm/dd/yyyy)</em>"},exclude:{regex:function(t,n){return this.error='"'+n+'" is not available.',!~e.inArray(n,t.userOptions.data.exclude)}}};e.fn.idealforms=function(r){var i=e.extend({inputs:{},filters:{},onSuccess:function(e){alert("Thank you...")},onFail:function(){alert("The form does not validate! Check again...")},responsiveAt:"auto",customInputs:!0},r),s=this,o={inputs:s.find("input, select, textarea, :button"),labels:s.find("label:first-child"),text:s.find("input:text, input:password, textarea"),select:s.find("select"),radiocheck:s.find("input:radio, input:checkbox"),buttons:s.find(":button")},u=e('[name="'+t.getKeys(i.inputs).join('"], [name="')+'"]'),a={fieldWidth:t.getLessVar("ideal-field-width","width")},f={init:function(){var n=e('<span class="error" />'),r=e('<i class="icon valid-icon" />'),a=e("<i/>",{"class":"icon invalid-icon",click:function(){var t=e(this);t.siblings("label").length?t.siblings("label:first").find("input").focus():t.siblings("input, select, textarea").focus()}});s.css("visibility","visible").addClass("ideal-form"),s.children("div").addClass("ideal-wrap"),s.attr("novalidate","novalidate"),o.inputs.attr("autocomplete","off"),o.labels.addClass("ideal-label").width(t.getMaxWidth(o.labels)),o.text.add(o.select).each(function(){var t=e(this);t.wrapAll('<span class="ideal-field"/>')}),o.radiocheck.parents(".ideal-wrap").each(function(){e(this).find("label:not(.ideal-label)").wrapAll('<span class="ideal-field ideal-radiocheck"/>')}),u.parents(".ideal-field").append(r.add(a)).after(n.hide()),i.customInputs&&(o.buttons.addClass("ideal-button"),o.select.addClass("custom").toCustomSelect(),o.radiocheck.addClass("custom").toCustomRadioCheck()),"placeholder"in e("<input/>")[0]||o.text.each(function(){e(this).val(e(this).attr("placeholder"))}).on({focus:function(){this.value===e(this).attr("placeholder")&&e(this).val("")},blur:function(){e(this).val()||e(this).val(e(this).attr("placeholder"))}})}(),validate:function(e,t){var r=!0,i="",s=e.input,o=e.userOptions,u=o.filters;if(u){!t&&/required/.test(u)&&(i=o.errors&&o.errors.required?o.errors.required:"This field is required.",r=!1);if(t){u=u.split(/\s/);for(var a=0,f=u.length;a<f;a++){var l=u[a],c=typeof n[l]=="undefined"?"":n[l],h=typeof c.regex=="function",p=c.regex instanceof RegExp;if(c&&(h&&!c.regex(e,t)||p&&!c.regex.test(t))){r=!1,i=o.errors&&o.errors[l]||c.error;break}}}}return{isValid:r,error:i}},analyze:function(e,t){var n=u.filter('[name="'+e.attr("name")+'"]'),r=e.is(":checkbox, :radio"),s=i.inputs[e.attr("name")]||"",o=function(){var t=e.val();if(t===e.attr("placeholder"))return;return r?s&&" ":t}(),a=e.parents(".ideal-field"),l=a.next(".error"),c=function(){return r?e.parent().siblings(".invalid-icon"):e.siblings(".invalid-icon")}(),h=function(){return r?e.parent().siblings(".valid-icon"):e.siblings(".valid-icon")}(),p=f.validate({input:n,userOptions:s},o);a.removeClass("valid invalid"),l.add(c).add(h).hide(),o&&p.isValid&&(l.add(c).hide(),a.addClass("valid"),h.show()),p.isValid||(c.show(),a.addClass("invalid"),t!=="blur"&&l.html(p.error).show())},responsive:function(){var t=a.fieldWidth+o.labels.outerWidth(),n=o.labels.filter(function(){return e(this).html()==="&nbsp;"}),r=o.select.next(".ideal-select");i.responsiveAt==="auto"?s.width()<t?s.addClass("stack"):s.removeClass("stack"):e(window).width()<i.responsiveAt?s.addClass("stack"):s.removeClass("stack"),s.is(".stack")?n.hide():n.show(),s.is(".stack")?r.trigger("list"):r.trigger("menu")}};return u.on("keyup change focus blur",function(t){f.analyze(e(this),t.type)}).blur(),s.submit(function(e){var t=s.find(".ideal-field.invalid");t.length?(e.preventDefault(),i.onFail(),t.first().find(":first").focus()):i.onSuccess(e)}),i.responsiveAt&&(e(window).resize(function(){f.responsive()}),f.responsive()),e.extend(!0,n,i.filters),this}})(jQuery);
(function(e,t,i){"use strict";e.idealforms={},e.idealforms.filters={},e.idealforms.errors={},e.idealforms.flags={},e.idealforms.ajaxRequests={};var a={getMaxWidth:function(t){var i=0;return t.each(function(){var t=e(this).outerWidth();t>i&&(i=t)}),i},getLessVar:function(t,i){var a=e('<p class="'+t+'"></p>').hide().appendTo("body").css(i);return e("."+t).remove(),/^\d+/.test(a)?parseInt(a,10):a},getKeys:function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t},getObjSize:function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i},isFunction:function(e){return"function"==typeof e},isRegex:function(e){return e instanceof RegExp},isString:function(e){return"string"==typeof e},getByNameOrId:function(t){var i=e('[name="'+t+'"]').length?e('[name="'+t+'"]'):e("#"+t);return i.length?i:e.error('The field "'+t+"\" doesn't exist.")},getFieldsFromArray:function(t){for(var i=[],s=0,r=t.length;r>s;s++)i.push(a.getByNameOrId(t[s]).get(0));return e(i)},convertToArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)?e:[e]},getIdealType:function(e){var t=e.attr("type")||e[0].tagName.toLowerCase();return/(text|password|email|number|search|url|tel|textarea)/.test(t)&&"text"||/file/.test(t)&&"file"||/select/.test(t)&&"select"||/(radio|checkbox)/.test(t)&&"radiocheck"||/(button|submit|reset)/.test(t)&&"button"||/h\d/.test(t)&&"heading"||/hr/.test(t)&&"separator"||/hidden/.test(t)&&"hidden"},makeInput:function(e,t,i,a,s){function r(e){var t,i,a;return/::/.test(e)?(a=e.split("::"),t=a[0],i=a[1]):t=i=e,{item:t,value:i}}var n,l,o,d,c=[];if(/^(text|password|email|number|search|url|tel|file|hidden)$/.test(i)&&(n='<input type="'+i+'" '+'id="'+e+'" '+'name="'+e+'" '+'value="'+t+'" '+(s&&'placeholder="'+s+'"')+"/>"),/textarea/.test(i)&&(n='<textarea id="'+e+'" name="'+e+'" value="'+t+'"></textarea>'),/select/.test(i)){for(c=[],o=0,d=a.length;d>o;o++)l=r(a[o]).item,t=r(a[o]).value,c.push('<option value="'+t+'">'+l+"</option>");n='<select id="'+e+'" name="'+e+'">'+c.join("")+"</select>"}if(/(radio|checkbox)/.test(i)){for(c=[],o=0,d=a.length;d>o;o++)l=r(a[o]).item,t=r(a[o]).value,c.push('<label><input type="'+i+'" name="'+e+'" value="'+t+'" />'+l+"</label>");n=c.join("")}return n},escapeRegex:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}};e.fn.idealTabs=function(t){var i=this,s=t,r=e('<ul class="ideal-tabs-wrap"/>'),n=function(){var t=[];return i.each(function(){var i=e(this).attr("name"),a='<li class="ideal-tabs-tab"><span>'+i+"</span>"+'<i class="ideal-tabs-tab-counter ideal-tabs-tab-counter-zero">0</i>'+"</li>";t.push(a)}),e(t.join(""))}(),l={getCurIdx:function(){return n.filter(".ideal-tabs-tab-active").index()},getTabIdxByName:function(t){var i=RegExp(a.escapeRegex(t),"i"),s=n.filter(function(){return i.test(e(this).text())});return s.index()}},o={switchTab:function(e){var t=a.isString(e)?l.getTabIdxByName(e):e;n.removeClass("ideal-tabs-tab-active"),n.eq(t).addClass("ideal-tabs-tab-active"),i.hide().eq(t).show()},nextTab:function(){var e=l.getCurIdx()+1;e>n.length-1?o.firstTab():o.switchTab(e)},prevTab:function(){o.switchTab(l.getCurIdx()-1)},firstTab:function(){o.switchTab(0)},lastTab:function(){o.switchTab(n.length-1)},updateCounter:function(e,t){var i=isNaN(e)?l.getTabIdxByName(name):e,a=n.eq(i).find(".ideal-tabs-tab-counter");a.removeClass("ideal-tabs-tab-counter-zero"),t||a.addClass("ideal-tabs-tab-counter-zero"),a.html(t)}};for(var d in o)i[d]=o[d];return n.first().addClass("ideal-tabs-tab-active").end().click(function(){var t=e(this).text();i.switchTab(t)}),r.append(n).appendTo(s),i.addClass("ideal-tabs-content"),i.each(function(){var t=e(this),i=e(this).attr("name");t.data("ideal-tabs-content-name",i).removeAttr("name")}),i.hide().first().show(),i},e.fn.idealSelect=function(){return this.each(function(){var t=e(this),s=t.find("option"),r=function(){var i=e('<ul class="ideal-select '+t.attr("name")+'"/>'),a=e('<li><span class="ideal-select-title">'+s.filter(":selected").text()+"</span></li>"),r=function(){var t=[];return s.each(function(){var i=e(this);t.push('<li class="ideal-select-item">'+i.text()+"</li>")}),t}();return a.append('<ul class="ideal-select-sub">'+r.join("")+"</ul>"),i.append(a),{select:i,title:a.find(".ideal-select-title"),sub:a.find(".ideal-select-sub"),items:a.find(".ideal-select-item")}}(),n={getSelectedIdx:function(){return r.items.filter(".ideal-select-item-selected").index()},init:function(){t.css({position:"absolute",left:"-9999px"}),r.sub.hide(),r.select.insertAfter(t),r.select.css("min-width",a.getMaxWidth(r.items)),r.items.eq(s.filter(":selected").index()).addClass("ideal-select-item-selected")}(),noWindowScroll:function(e){(40===e.which||38===e.which||13===e.which)&&e.preventDefault()},focusHack:function(){setTimeout(function(){t.trigger("focus")},1)},focus:function(){r.select.addClass("ideal-select-focus"),e(i).on("keydown.noscroll",n.noWindowScroll)},blur:function(){r.select.removeClass("ideal-select-open ideal-select-focus"),e(i).off(".noscroll")},scrollIntoView:function(e){var t=r.items.filter(".ideal-select-item-selected"),i=r.items.outerHeight(),a=r.sub.outerHeight(),s=function(){var s=t.position().top+i;return"down"===e?a>=s:s>0}();s||(i="down"===e?i:-i,r.sub.scrollTop(r.sub.scrollTop()+i))},scrollToItem:function(){var e=n.getSelectedIdx(),t=r.items.outerHeight(),i=r.items.length,a=t*i,s=t*(i-e);r.sub.scrollTop(a-s)},showMenu:function(){r.sub.fadeIn("fast"),r.select.addClass("ideal-select-open"),n.select(n.getSelectedIdx()),n.scrollToItem()},hideMenu:function(){r.sub.hide(),r.select.removeClass("ideal-select-open")},select:function(e){r.items.removeClass("ideal-select-item-selected"),r.items.eq(e).addClass("ideal-select-item-selected")},change:function(e){var i=r.items.eq(e).text();n.select(e),r.title.text(i),s.eq(e).prop("selected",!0),t.trigger("change")},keydown:function(t){var i=n.getSelectedIdx(),a=r.select.is(".ideal-select-menu"),l=r.select.is(".ideal-select-open"),o={9:function(){a&&(n.blur(),n.hideMenu())},13:function(){a&&(l?n.hideMenu():n.showMenu()),n.change(i)},27:function(){a&&n.hideMenu()},40:function(){s.length-1>i&&(l?n.select(i+1):n.change(i+1)),n.scrollIntoView("down")},38:function(){i>0&&(l?n.select(i-1):n.change(i-1)),n.scrollIntoView("up")},"default":function(){var i=String.fromCharCode(t),a=r.items.filter(function(){return/^\w+$/i.test(i)&&RegExp("^"+i,"i").test(e(this).text())}),s=a.length,o=r.select.data("counter")+1||0,d=r.select.data("key")||t,c=a.eq(o).index();return s?(d===t?s>o?r.select.data("counter",o):(r.select.data("counter",0),c=a.eq(0).index()):(r.select.data("counter",0),c=a.eq(0).index()),l?n.select(c):n.change(c),r.select.data("key",t),n.scrollToItem(),n.focusHack(),undefined):!1}};o[t]?o[t]():o["default"]()}},l={focus:n.focus,"blur.menu":function(){n.blur(),n.hideMenu()},"blur.list":function(){n.blur()},keydown:function(e){n.keydown(e.which)},"clickItem.menu":function(){n.change(e(this).index()),n.hideMenu()},"clickItem.list":function(){n.change(e(this).index())},"clickTitle.menu":function(){n.focus(),n.showMenu(),t.trigger("focus")},"hideOutside.menu":function(){t.off("blur.menu"),e(i).on("mousedown.ideal",function(a){e(a.target).closest(r.select).length?n.focusHack():(e(i).off("mousedown.ideal"),t.on("blur.menu",l["blur.menu"]))})},"mousedown.list":function(){n.focusHack()}},o=function(){r.select.removeClass("ideal-select-menu ideal-select-list"),t.off(".menu .list"),r.items.off(".menu .list"),r.select.off(".menu .list"),r.title.off(".menu .list")};r.select.on("menu",function(){o(),r.select.addClass("ideal-select-menu"),n.hideMenu(),t.on({"blur.menu":l["blur.menu"],"focus.menu":l.focus,"keydown.menu":l.keydown}),r.select.on("mousedown.menu",l["hideOutside.menu"]),r.items.on("click.menu",l["clickItem.menu"]),r.title.on("click.menu",l["clickTitle.menu"])}),r.select.on("list",function(){o(),r.select.addClass("ideal-select-list"),n.showMenu(),t.on({"blur.list":l["blur.list"],"focus.list":l.focus,"keydown.list":l.keydown}),r.select.on("mousedown.list",l["mousedown.list"]),r.items.on("mousedown.list",l["clickItem.list"])}),t.keydown(function(e){9!==e.which&&e.preventDefault()}),r.select.on("reset",function(){n.change(0)}),r.select.trigger("menu")})},e.fn.idealRadioCheck=function(){return this.each(function(){var t=e(this),i=e("<span/>");i.addClass("ideal-"+(t.is(":checkbox")?"check":"radio")),t.is(":checked")&&i.addClass("checked"),i.insertAfter(t),t.parent("label").addClass("ideal-radiocheck-label").attr("onclick",""),t.css({position:"absolute",left:"-9999px"}),t.on({change:function(){var t=e(this);t.is('input[type="radio"]')&&t.parent().siblings("label").find(".ideal-radio").removeClass("checked"),i.toggleClass("checked",t.is(":checked"))},focus:function(){i.addClass("focus")},blur:function(){i.removeClass("focus")},click:function(){e(this).trigger("focus")}})})},function(e){var t=e("<input/>")[0].multiple!==undefined,i=/msie/i.test(navigator.userAgent);e.fn.idealFile=function(){return this.each(function(){var a=e(this).addClass("ideal-file"),s=e('<div class="ideal-file-wrap">'),r=e('<input type="text" class="ideal-file-filename" />'),n=e('<button type="button" class="ideal-file-upload">Open</button>'),l=e('<label class="ideal-file-upload" for="'+a[0].id+'">Open</label>');a.css({position:"absolute",left:"-9999px"}),s.append(r,i?l:n).insertAfter(a),a.attr("tabIndex",-1),n.attr("tabIndex",-1),n.click(function(){a.focus().click()}),a.change(function(){var e,i,s=[];if(t){e=a[0].files;for(var n=0,l=e.length;l>n;n++)s.push(e[n].name);i=s.join(", ")}else i=a.val().split("\\").pop();r.val(i).attr("title",i)}),r.on({focus:function(){a.trigger("change")},blur:function(){a.trigger("blur")},keydown:function(e){if(13===e.which)i||a.trigger("click");else{if(8!==e.which&&46!==e.which)return 9===e.which?undefined:!1;a.replaceWith(a=a.val("").clone(!0)),a.trigger("change"),r.val("")}}})})}}(jQuery),e.idealforms.errors={required:"This field is required.",number:"Must be a number.",digits:"Must be only digits.",name:"Must be at least 3 characters long, and must only contain letters.",username:"Must be at between 4 and 32 characters long and start with a letter. You may use letters, numbers, underscores, and one dot (.)",pass:"Must be at least 6 characters long, and contain at least one number, one uppercase and one lowercase letter.",strongpass:"Must be at least 8 characters long and contain at least one uppercase and one lowercase letter and one number or special character.",email:"Must be a valid e-mail address. <em>(e.g. user@gmail.com)</em>",phone:"Must be a valid US phone number. <em>(e.g. 555-123-4567)</em>",zip:"Must be a valid US zip code. <em>(e.g. 33245 or 33245-0003)</em>",url:"Must be a valid URL. <em>(e.g. www.google.com)</em>",minChar:"Must be at least <strong>{0}</strong> characters long.",minOption:"Check at least <strong>{0}</strong> options.",maxChar:"No more than <strong>{0}</strong> characters long.",maxOption:"No more than <strong>{0}</strong> options allowed.",range:"Must be a number between {0} and {1}.",date:"Must be a valid date. <em>(e.g. {0})</em>",dob:"Must be a valid date of birth.",exclude:'"{0}" is not available.',excludeOption:"{0}",equalto:'Must be the same value as <strong>"{0}"</strong>',extension:'File(s) must have a valid extension. <em>(e.g. "{0}")</em>',ajaxSuccess:"<strong>{0}</strong> is not available.",ajaxError:"Server error..."};var s=function(){var t={required:{regex:/.+/,error:e.idealforms.errors.required},number:{regex:function(e,t){return!isNaN(t)},error:e.idealforms.errors.number},digits:{regex:/^\d+$/,error:e.idealforms.errors.digits},name:{regex:/^[A-Za-z]{3,}$/,error:e.idealforms.errors.name},username:{regex:/^[a-z](?=[\w.]{3,31}$)\w*\.?\w*$/i,error:e.idealforms.errors.username},pass:{regex:/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/,error:e.idealforms.errors.pass},strongpass:{regex:/(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/,error:e.idealforms.errors.strongpass},email:{regex:/[^@]+@[^@]/,error:e.idealforms.errors.email},phone:{regex:/^[2-9]\d{2}-\d{3}-\d{4}$/,error:e.idealforms.errors.phone},zip:{regex:/^\d{5}$|^\d{5}-\d{4}$/,error:e.idealforms.errors.zip},url:{regex:/^(?:(ftp|http|https):\/\/)?(?:[\w\-]+\.)+[a-z]{2,6}([\:\/?#].*)?$/i,error:e.idealforms.errors.url},min:{regex:function(t,i){var a=t.input,s=t.userOptions.data.min,r=a.is('[type="checkbox"], [type="radio"]');return r?(this.error=e.idealforms.errors.minOption.replace("{0}",s),a.filter(":checked").length>=s):(this.error=e.idealforms.errors.minChar.replace("{0}",s),i.length>=s)}},max:{regex:function(t,i){var a=t.input,s=t.userOptions.data.max,r=a.is('[type="checkbox"], [type="radio"]');return r?(this.error=e.idealforms.errors.maxOption.replace("{0}",s),s>=a.filter(":checked").length):(this.error=e.idealforms.errors.maxChar.replace("{0}",s),s>=i.length)}},range:{regex:function(t,i){var a=t.userOptions.data.range,s=+i;return this.error=e.idealforms.errors.range.replace("{0}",a[0]).replace("{1}",a[1]),s>=a[0]&&a[1]>=s}},date:{regex:function(t,i){var a=t.userOptions.data&&t.userOptions.data.date?t.userOptions.data.date:"mm/dd/yyyy",s=/[^mdy]/.exec(a)[0],r=a.split(s),n=i.split(s),l=function(e,t){for(var i,a,s,r=0,n=t.length;n>r;r++)/m/.test(t[r])&&(i=e[r]),/d/.test(t[r])&&(a=e[r]),/y/.test(t[r])&&(s=e[r]);return i>0&&13>i&&s&&4===s.length&&a>0&&new Date(s,i,0).getDate()>=a};return this.error=e.idealforms.errors.date.replace("{0}",a),l(n,r)}},dob:{regex:function(i,a){var s=i.userOptions.data&&i.userOptions.data.dob?i.userOptions.data.dob:"mm/dd/yyyy",r={input:i.input,userOptions:{data:{date:s}}},n=t.date.regex(r,a),l=/\d{4}/.exec(a),o=(new Date).getFullYear(),d=o-100;return this.error=e.idealforms.errors.dob,n&&l>=d&&o>=l}},exclude:{regex:function(t,i){var a=t.input,s=t.userOptions.data.exclude,r=a.is('[type="checkbox"], [type="radio"], select');return this.error=r?e.idealforms.errors.excludeOption.replace("{0}",i):this.error=e.idealforms.errors.exclude.replace("{0}",i),-1===e.inArray(i,s)}},equalto:{regex:function(t){var i=e(t.userOptions.data.equalto),a=t.input,s=i.attr("name")||i.attr("id"),r=i.parents(".ideal-field").filter(function(){return e(this).data("ideal-isvalid")===!0}).length;return r?(this.error=e.idealforms.errors.equalto.replace("{0}",s),a.val()===i.val()):!1}},extension:{regex:function(t,i){for(var a=t.input[0].files||[{name:i}],s=t.userOptions.data.extension,r=RegExp("\\."+s.join("|")+"$","i"),n=!1,l=0,o=a.length;o>l;l++)n=r.test(a[l].name);return this.error=e.idealforms.errors.extension.replace("{0}",s.join('", "')),n}},ajax:{regex:function(t,i,a){var s=this,r=t.input,n=t.userOptions,l=r.attr("name"),o=r.parents(".ideal-field"),d=n.errors&&n.errors.ajax;s.error={},s.error.success=d&&d.success?d.success:e.idealforms.errors.ajaxSuccess.replace("{0}",i),s.error.fail=d&&d.error?d.error:e.idealforms.errors.ajaxError;var c={};c[l]=e.trim(i);var u=t.userOptions.data.ajax,f={type:"post",dataType:"json",data:c,success:function(e,t,i){console.log(e),a(s.error.success,!0),r.data({"ideal-ajax-resp":e,"ideal-ajax-error":s.error.success}),r.trigger("change"),o.removeClass("ajax"),u._success&&u._success(e,t,i)},error:function(e,t,i){"abort"!==t&&(a(s.error.fail,!1),r.data("ideal-ajax-error",s.error.fail),o.removeClass("ajax"),u._error&&u._error(e,t,i))}};e.extend(f,u),r.removeData("ideal-ajax-error"),r.removeData("ideal-ajax-resp"),o.addClass("ajax"),e.idealforms.ajaxRequests[l]=e.ajax(f)}}};return t};e.idealforms.flags={noerror:function(e){e.parent().siblings(".ideal-error").hide()},noicons:function(e){e.siblings(".ideal-icon-valid, .ideal-icon-invalid").hide()},novalidicon:function(e){e.siblings(".ideal-icon-valid").hide()},noinvalidicon:function(e){e.siblings(".ideal-icon-invalid").hide()},noclass:function(e){e.parents(".ideal-field").removeClass("valid invalid")},novalidclass:function(e){e.parents(".ideal-field").removeClass("valid")},noinvalidclass:function(e){e.parents(".ideal-field").removeClass("invalid")}};var r={inputs:{},customFilters:{},customFlags:{},globalFlags:"",onSuccess:function(){alert("Thank you...")},onFail:function(){alert("Invalid!")},responsiveAt:"auto",disableCustom:""},n=function(t,i){var a=this;a.$form=e(t),a.opts=e.extend({},r,i),a.$tabs=a.$form.find("section"),e.extend(e.idealforms.filters,s()),a._init()};e.fn.idealforms=function(t){return this.each(function(){e.data(this,"idealforms")||e.data(this,"idealforms",new n(this,t))})};var l={fieldWidth:a.getLessVar("ideal-field-width","width")};e.extend(n.prototype,{_init:function(){var i=this,a=i.opts,s=i._getFormElements();if(i.$form.css("visibility","visible").addClass("ideal-form").attr("novalidate","novalidate"),s.inputs.add(s.headings).add(s.separators).each(function(){i._doMarkup(e(this))}),i.$tabs.length){var r=e('<div class="ideal-wrap ideal-tabs ideal-full-width"/>');i.$form.prepend(r),i.$tabs.idealTabs(r)}jQuery.ui&&(e.datepicker._checkOffset=function(e,t){return t}),i.$form.find("[data-ideal]").each(function(){var t=a.inputs[this.name];a.inputs[this.name]=t||{filters:e(this).data("ideal")}}),a.responsiveAt&&(e(t).resize(function(){i._responsive()}),i._responsive()),i.$form.on({keydown:function(e){13===e.which&&"TEXTAREA"!==e.target.nodeName&&e.preventDefault()},submit:function(e){i.isValid()?a.onSuccess(e):(e.preventDefault(),a.onFail(),i.focusFirstInvalid())}}),i._adjust(),i._attachEvents(),i.fresh()},_getFormElements:function(){return{inputs:this.$form.find("input, select, textarea, :button"),labels:this.$form.find("div > label:first-child"),text:this.$form.find('input:not([type="checkbox"], [type="radio"], [type="submit"]), textarea'),select:this.$form.find("select"),radiocheck:this.$form.find('input[type="radio"], input[type="checkbox"]'),buttons:this.$form.find(":button"),file:this.$form.find('input[type="file"]'),headings:this.$form.find("h1, h2, h3, h4, h5, h6"),separators:this.$form.find("hr"),hidden:this.$form.find("input:hidden")}},_getUserInputs:function(){return this.$form.find('[name="'+a.getKeys(this.opts.inputs).join('"], [name="')+'"]')},_getTab:function(t){var i=this,a=!isNaN(t);return a?i.$tabs.eq(t):i.$tabs.filter(function(){var i=RegExp(t,"i");return i.test(e(this).data("ideal-tabs-content-name"))})},_getCurrentTabIdx:function(){return this.$tabs.index(this.$form.find(".ideal-tabs-content:visible"))},_updateTabsCounter:function(){var e=this;e.$tabs.each(function(t){var i=e.getInvalidInTab(t).length;e.$tabs.updateCounter(t,i)})},_adjust:function(){var t=this;t.opts;var i=t._getFormElements(),s=t._getCurrentTabIdx();i.inputs.attr("autocomplete","off"),t.$tabs.length&&t.$tabs.show();var r=i.labels;r.removeAttr("style").width(a.getMaxWidth(r)),t.$tabs.length?this.$tabs.each(function(){e(this).find(".ideal-heading:first").addClass("first-child")}):t.$form.find(".ideal-heading:first").addClass("first-child"),t._setDatepicker(),t.$tabs.length&&(t.$tabs.hide(),t.switchTab(s))},_setDatepicker:function(){var t=this.opts,i=this.$form.find("input.datepicker");jQuery.ui&&i.length&&(i.each(function(){var i=t.inputs[this.name],a=i&&i.data&&i.data.date,s=a?a.replace("yyyy","yy"):"mm/dd/yy";e(this).datepicker({dateFormat:s,beforeShow:function(t){e(t).addClass("open")},onChangeMonthYear:function(){var t=e(this),i=t.outerWidth();setTimeout(function(){t.datepicker("widget").css("width",i)},1)},onClose:function(){e(this).removeClass("open")}})}),i.on("focus keyup",function(){var t=e(this),i=t.outerWidth();t.datepicker("widget").css("width",i)}),i.parent().siblings(".ideal-error").addClass("hidden"))},_doMarkup:function(t){var i=this.opts,s=a.getIdealType(t),r=e('<span class="ideal-field"/>'),n=e('<span class="ideal-error" />'),l=e('<i class="ideal-icon ideal-icon-valid" />'),o=e('<i class="ideal-icon ideal-icon-invalid"/>').click(function(){e(this).parent().find("input:first, textarea, select").focus()});t.closest("div").addClass("ideal-wrap").children("label:first-child").addClass("ideal-label");var d={_defaultInput:function(){t.wrapAll(r).after(l,o).parent().after(n)},text:function(){d._defaultInput()},radiocheck:function(){var e=t.parents(".ideal-field").length;e||(t.parent().nextAll().andSelf().wrapAll(r.addClass("ideal-radiocheck")),t.parents(".ideal-field").append(l,o).after(n)),/radiocheck/.test(i.disableCustom)||t.idealRadioCheck()},select:function(){d._defaultInput(),/select/.test(i.disableCustom)||t.idealSelect()},file:function(){d._defaultInput(),/file/.test(i.disableCustom)||t.idealFile()},button:function(){/button/.test(i.disableCustom)||t.addClass("ideal-button")},hidden:function(){t.closest("div").addClass("ideal-hidden")},heading:function(){t.closest("div").addClass("ideal-full-width"),t.parent().children().wrapAll('<span class="ideal-heading"/>')},separator:function(){t.closest("div").addClass("ideal-full-width"),t.wrapAll('<div class="ideal-separator"/>')}};d[s]&&d[s](),n.add(l).add(o).hide()},_validate:function(t,i){function s(){m.removeClass("valid invalid").removeData("ideal-isvalid"),g.add(v).add(b).hide()}function r(e,t){s(),t?b.show():v.show(),m.addClass(t?"valid":"invalid"),m.data("ideal-isvalid",t),t||g.html(e).toggle(m.is(".ideal-field-focus"))}var n=this,l=this.opts,o=l.inputs[t.attr("name")],d=o.filters&&o.filters.split(/\s/),c=t.attr("name"),u=t.val(),f=e.idealforms.ajaxRequests[c],h=t.is('[type="checkbox"], [type="radio"]'),p={input:h?n.$form.find('[name="'+c+'"]'):t,userOptions:o},m=t.parents(".ideal-field"),g=m.siblings(".ideal-error"),v=h?t.parent().siblings(".ideal-icon-invalid"):t.siblings(".ideal-icon-invalid"),b=h?t.parent().siblings(".ideal-icon-valid"):t.siblings(".ideal-icon-valid"),x=t.data("ideal-value")||0;if(t.data("ideal-value",u),"keyup"===i.type&&u===x)return!1;d?e.each(d,function(n,l){var d=e.idealforms.filters[l],c=o.errors&&o.errors[l],h="";if(!u&&"required"!==l)return s(),!1;if(d)if("keyup"===i.type&&f&&(f.abort(),m.removeClass("ajax")),"ajax"===l)if(r(h,!1),g.hide(),"keyup"===i.type)d.regex(p,u,r);else{var v=t.data("ideal-ajax-error");v&&r(v,t.data("ideal-ajax-resp")||!1)}else{var b=a.isRegex(d.regex)&&d.regex.test(u)||a.isFunction(d.regex)&&d.regex(p,u);if(h=c||d.error,r(h,b),!b)return!1}}):s();var y=function(){var t=o.flags&&o.flags.split(" ")||[];return l.globalFlags&&e.each(l.globalFlags.split(" "),function(e,i){t.push(i)}),t}();y.length&&e.each(y,function(a,s){var r=e.idealforms.flags[s];r&&r(t,i.type)}),n.$tabs.length&&n._updateTabsCounter(n._getCurrentTabIdx())},_attachEvents:function(){var t=this;t._getUserInputs().on("keyup change focus blur",function(i){var a=e(this),s=a.parents(".ideal-field"),r=a.is("input[type=file]");("focus"===i.type||r&&"change"===i.type)&&s.addClass("ideal-field-focus"),"blur"===i.type&&s.removeClass("ideal-field-focus"),t._validate(a,i)})},_responsive:function(){var i=this._getFormElements(),a=l.fieldWidth+i.labels.outerWidth(),s=i.labels.filter(function(){return"&nbsp;"===e(this).html()}),r=this.$form.find(".ideal-select");"auto"===this.opts.responsiveAt?this.$form.toggleClass("stack",a>this.$form.width()):this.$form.toggleClass("stack",e(t).width()<this.opts.responsiveAt);var n=this.$form.is(".stack");s.toggle(!n),r.trigger(n?"list":"menu");var o=this.$form.find("input.hasDatepicker");o.length&&o.datepicker("hide")}}),e.extend(n.prototype,{getInvalid:function(){return this.$form.find(".ideal-field").filter(function(){return e(this).data("ideal-isvalid")===!1})},getInvalidInTab:function(t){return this._getTab(t).find(".ideal-field").filter(function(){return e(this).data("ideal-isvalid")===!1})},isValid:function(){return!this.getInvalid().length},isValidField:function(e){var t=a.getByNameOrId(e);return t.parents(".ideal-field").data("ideal-isvalid")===!0},focusFirst:function(){return this.$tabs.length?this.$tabs.filter(":visible").find(".ideal-field:first").find("input:first, select, textarea").focus():this.$form.find(".ideal-field:first").find("input:first, select, textarea").focus(),this},focusFirstInvalid:function(){var e=this.getInvalid().first().find("input:first, select, textarea"),t=e.parents(".ideal-tabs-content").data("ideal-tabs-content-name");return this.$tabs.length&&this.switchTab(t),e.focus(),this},switchTab:function(e){return this.$tabs.switchTab(e),this},nextTab:function(){return this.$tabs.nextTab(),this},prevTab:function(){return this.$tabs.prevTab(),this},firstTab:function(){return this.$tabs.firstTab(),this},lastTab:function(){return this.$tabs.lastTab(),this},fresh:function(){return this._getUserInputs().change().parents(".ideal-field").removeClass("valid invalid"),this},freshFields:function(t){return t=a.convertToArray(t),e.each(t,function(e){var i=a.getByNameOrId(t[e]);i.change().parents(".ideal-field").removeClass("valid invalid")}),this},reload:function(){return this._adjust(),this._attachEvents(),this},reset:function(){var e=this._getFormElements();return e.text.val(""),e.radiocheck.removeAttr("checked"),e.select.find("option").first().prop("selected",!0),this.$form.find(".ideal-select").trigger("reset"),this.$tabs.length&&this.firstTab(),this.focusFirst().fresh(),this},resetFields:function(t){return t=a.convertToArray(t),this._getFormElements(),e.each(t,function(e,t){var i=a.getByNameOrId(t),s=a.getIdealType(i);("text"===s||"file"===s)&&i.val(""),"radiocheck"===s&&i.removeAttr("checked"),"select"===s&&(i.find("option").first().prop("selected",!0),i.next(".ideal-select").trigger("reset")),i.change()}),this.freshFields(t),this},toggleFields:function(t){t=a.convertToArray(t);var i=this,s=a.getFieldsFromArray(t);return s.each(function(){var t=e(this),a=t.attr("name")||t.attr("id"),s=i.opts.inputs[a],r=s&&s.filters,n=t.data("ideal-filters")||"";t.data("ideal-filters",r),t.closest(".ideal-wrap").toggle(),i.setFieldOptions(a,{filters:n})}),this},setOptions:function(t){return e.extend(!0,this.opts,t),this.reload().fresh(),this},setFieldOptions:function(t,i){return e.extend(!0,this.opts.inputs[t],i),this.reload().freshFields([t]),this},addFields:function(t){function i(t){var i=t.name,n={filters:t.filters||"",data:t.data||{},errors:t.errors||{},flags:t.flags||""},l=t.label||"",o=t.type,d=t.list||[],c=t.placeholder||"",u=t.value||"",f=e("<div><label>"+l+":</label>"+a.makeInput(i,u,o,d,c)+"</div>"),h=f.find("input, select, textarea, :button");n.filters&&(s.opts.inputs[i]=n),s._doMarkup(h),t.addAfter?f.insertAfter(e(a.getByNameOrId(t.addAfter)).parents(".ideal-wrap")):t.addBefore?f.insertBefore(e(a.getByNameOrId(t.addBefore)).parents(".ideal-wrap")):t.appendToTab?f.insertAfter(s._getTab(t.appendToTab).find(".ideal-wrap:last-child")):f.insertAfter(s.$form.find(".ideal-wrap").last()),r.push(i)}t=a.convertToArray(t);var s=this,r=[];return e.each(t,function(e,t){i(t)}),s.reload(),s.freshFields(r),s._responsive(),this},removeFields:function(e){e=a.convertToArray(e);var t=a.getFieldsFromArray(e);return t.parents(".ideal-wrap").remove(),this.reload(),this}})})(jQuery,window,document);